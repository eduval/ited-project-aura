<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8">
  <title>AURA</title>
  <meta name="description" content="AURA">

  <meta name="viewport" content="width=device-width, maximum-scale=5, initial-scale=1">

  <!-- up to 10% speed up for external res -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com/">
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/">
  <!-- preloading icon font is helping to speed up a little bit -->
  <link rel="preload" href="assets/fonts/flaticon/Flaticon.woff2" as="font" type="font/woff2" crossorigin>

  <link rel="stylesheet" href="assets/css/core.min.css">
  <link rel="stylesheet" href="assets/css/vendor_bundle.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap">

  <!-- favicon -->
  <link rel="shortcut icon" href="favicon.ico">
  <style>
    .fi-arrow-down {
      display: inline-block !important;
    }

    .fi-arrow-down.rotated {
      transform: rotate(90deg);
      transition: transform 0.3s ease;
    }

    .d-none {
      display: none !important;
    }
  </style>

</head>


<!--

    Layout Admin
      .layout-admin   (required)

      .aside-sticky           - sidebar : fixed and push header
      .header-sticky          - header : always visible on top (acting as old .header-focus)

    ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++

    SCROLL TO TOP BUTTON [optional styling]

      data-s2t-disable="true"
      data-s2t-position="start|end"
      data-s2t-class="btn-secondary btn-sm"   (default)
      data-s2t-class="btn-secondary rounded-circle"
      data-s2t-class="btn-warning rounded-circle"

    ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++ ++

  -->

<body class="layout-admin layout-padded aside-sticky"
  data-s2t-class="btn-primary btn-sm bg-gradient-default rounded-circle border-0">

  <div id="wrapper" class="d-flex align-items-stretch flex-column">


    <!--  header -->
    <header id="header" class="d-flex align-items-center bg-transparent">

      <!-- Navbar -->
      <div class="px-3 px-lg-0 w-100 position-relative">

        <nav class="navbar navbar-expand-lg navbar-light justify-content-between h-auto">

          <!-- logo, navigation toggler -->
          <div class="align-items-start">

            <!-- sidebar toggler -->
            <a href="#aside-main"
              class="btn-sidebar-toggle h-100 d-inline-block d-lg-none justify-content-center align-items-center p-2">
              <span>
                <svg width="25" height="25" viewBox="0 0 20 20">
                  <path d="M 19.9876 1.998 L -0.0108 1.998 L -0.0108 -0.0019 L 19.9876 -0.0019 L 19.9876 1.998 Z">
                  </path>
                  <path d="M 19.9876 7.9979 L -0.0108 7.9979 L -0.0108 5.9979 L 19.9876 5.9979 L 19.9876 7.9979 Z">
                  </path>
                  <path d="M 19.9876 13.9977 L -0.0108 13.9977 L -0.0108 11.9978 L 19.9876 11.9978 L 19.9876 13.9977 Z">
                  </path>
                  <path d="M 19.9876 19.9976 L -0.0108 19.9976 L -0.0108 17.9976 L 19.9876 17.9976 L 19.9876 19.9976 Z">
                  </path>
                </svg>
              </span>
            </a>

            <!-- logo : mobile only -->
            <a class="navbar-brand d-inline-block d-lg-none mx-2" href="dashboard.html">
              <img src="https://ited.org.ec/img/ited.png" width="68" height="38" alt="AURA">
            </a>

          </div>

          <!-- options -->
          <ul class="list-inline list-unstyled mb-0 d-flex align-items-end">

            <!-- notifications -->
            <li class="list-inline-item mx-1 dropdown">

              <a href="#" id="dropdownNotificationOptions"
                class="btn btn-sm btn-light rounded-circle text-primary-hover dropdown-toggle" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false" aria-haspopup="true" aria-label="Notifications">

                <!-- svg icon -->
                <span style="margin-top: -3px;">
                  <svg width="24px" height="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <path fill="currentColor"
                        d="M17,12 L18.5,12 C19.3284271,12 20,12.6715729 20,13.5 C20,14.3284271 19.3284271,15 18.5,15 L5.5,15 C4.67157288,15 4,14.3284271 4,13.5 C4,12.6715729 4.67157288,12 5.5,12 L7,12 L7.5582739,6.97553494 C7.80974924,4.71225688 9.72279394,3 12,3 C14.2772061,3 16.1902508,4.71225688 16.4417261,6.97553494 L17,12 Z">
                      </path>

                      <!-- animate-blink -->
                      <!-- <rect class="animate-blink" fill="#6dbb30" opacity="0.8" x="10" y="16" width="4" height="4" rx="2"></rect> -->

                      <!-- no animate -->
                      <rect fill="#000000" opacity="0.3" x="10" y="16" width="4" height="4" rx="2"></rect>
                    </g>
                  </svg>
                  <span class="notification-count"
                    style="position: absolute; top: -20px; right: -5px; background: red; color: white; border-radius: 50%; padding: 5px 8px; font-size: 12px;">0</span>

                </span>

              </a>

              <div aria-labelledby="dropdownNotificationOptions"
                class="dropdown-menu dropdown-menu-clean dropdown-menu-navbar-autopos dropdown-fadeindown end-0 p-0 mt-2 w-300">
                <div class="dropdown-header p-4">... new notification</div>
                <div class="dropdown-divider"></div>
                <div class="max-vh-50 scrollable-vertical">

                  <div class="max-vh-50 scrollable-vertical" id="notifications-container">
                    <div class="py-5 text-gray-400 text-center" id="no-alerts-msg">Loading...</div>
                  </div>


                </div>
                <div class="dropdown-divider mb-0"></div>
                <a href="#" class="prefix-icon-ignore dropdown-footer dropdown-custom-ignore fw-medium py-3">
                  View all
                </a>
              </div>

            </li>





            <!-- account -->
            <li class="list-inline-item mx-1 dropdown" id="account-dropdown" style="display: none;">

              <!-- has avatar -->
              <a href="#" id="dropdownAccountOptions"
                class="btn btn-sm btn-icon btn-light dropdown-toggle rounded-circle shadow bg-cover"
                style="background-image:url(assets/images/users_img/user.jpg)" data-bs-toggle="dropdown"
                data-bs-auto-close="outside" aria-expanded="false" aria-haspopup="true"
                aria-label="Account options"></a>

              <!-- no avatar -->
              <!--
                <a href="#" id="dropdownAccountOptions" class="btn btn-sm btn-icon btn-light dropdown-toggle rounded-circle" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                  <span class="small fw-bold">JD</span>
                </a>
                -->

              <div aria-labelledby="dropdownAccountOptions"
                class="dropdown-menu dropdown-menu-clean dropdown-menu-navbar-autopos dropdown-menu-invert dropdown-fadeindown p-0 mt-2 w-300">

                <!-- user detail -->
                <div class="dropdown-header bg-primary bg-gradient rounded rounded-bottom-0 text-white small p-4">
                  <span id="user-name" class="d-block fw-medium text-truncate">Cargando...</span>
                  <span id="user-email" class="d-block smaller fw-medium text-truncate">Cargando...</span>
                  <span class="d-block smaller"><b>Last Login:</b> 2019-09-03 01:48</span>
                </div>


                <div class="dropdown-divider mb-3"></div>



                <a href="#" class="dropdown-item text-truncate">
                  <small class="badge bg-success-soft float-end">10 new</small>
                  <span class="fw-medium">My Alerts</span>
                  <small class="d-block text-muted smaller">inbox, projects, tasts</small>
                </a>







                <div class="dropdown-divider mb-0 mt-3"></div>

                <a href="#" id="logout-btn" class="dropdown-item text-danger fw-bold">
                  <i class="fi fi-power float-start"></i> Log Out
                </a>

              </div>

            </li>

          </ul>
          <!-- /options -->

        </nav>

      </div>
      <!-- /Navbar -->

    </header>
    <!-- /Header -->


    <!-- content -->
    <div id="wrapper_content" class="d-flex flex-fill">


      <!-- sidebar -->
      <aside id="aside-main" class="aside-start aside-hide-xs bg-white shadow-sm d-flex flex-column px-2 h-auto">


        <!-- sidebar : logo -->
        <div class="py-2 px-3 mb-3 mt-3">
          <a href="dashboard.html">
            <img src="https://ited.org.ec/img/ited.png" width="100" height="50" alt="...">
          </a>
        </div>
        <!-- /sidebar : logo -->


        <!-- sidebar : navigation -->
        <div class="aside-wrapper scrollable-vertical scrollable-styled-light align-self-baseline h-100 w-100">
          <nav class="nav-deep nav-deep-sm nav-deep-light js-ajaxified">
            <ul id="dynamicMenu" class="nav flex-column">
              <!-- Initial loading spinner -->
              <li class="text-center py-4">
                <div class="spinner-grow text-primary" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
              </li>
            </ul>
          </nav>
        </div>


        <!-- /sidebar : navigation -->


        <!-- sidebar : footer -->
        <div class="d-flex align-self-baseline w-100 py-3 px-3 border-top border-light small">

          <p class="d-inline-grid gap-auto-3 mb-0">
            <svg class="text-gray-600" width="22px" height="22px" xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512.052 512.052" fill="currentColor">
              <path
                d="M208.026,16.026c-114.7,0-208,78.9-208,176c0,39.8,15.7,77.9,44.5,108.9l-39.8,39.8c-4.6,4.6-6,11.5-3.5,17.4c2.5,6,8.3,9.9,14.8,9.9h192c114.7,0,208-78.9,208-176S322.726,16.026,208.026,16.026z">
              </path>
              <path opacity="0.5"
                d="M467.526,428.926c28.8-30.9,44.5-69.1,44.5-108.9c0-49.8-24.6-94.9-64-126.9c-0.9,114.1-108.2,206.9-240,206.9h-89.2c34.5,56.9,104.6,96,185.2,96h192c6.5,0,12.3-3.9,14.8-9.9c2.5-6,1.1-12.9-3.5-17.4L467.526,428.926z">
              </path>
              <path fill="#ffffff"
                d="M304.026,144.026h-192c-8.8,0-16,7.2-16,16s7.2,16,16,16h192c8.8,0,16-7.2,16-16S312.826,144.026,304.026,144.026z">
              </path>
              <path fill="#ffffff"
                d="M240.026,208.026h-128c-8.8,0-16,7.2-16,16s7.2,16,16,16h128c8.8,0,16-7.2,16-16S248.826,208.026,240.026,208.026z">
              </path>
            </svg>
            <a href="#" class="link-normal text-dashed">Need help?</a>
          </p>

        </div>
        <!-- /sidebar : footer -->


      </aside>
      <!-- /sidebar -->


      <!-- main -->
      <main id="middle" class="flex-fill mx-auto">


        <!-- PAGE TITLE -->
        <header id="userHeader" class="mt-lg-n6">
          <h1 class="h4" id="greeting">Good morning!</h1>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb small">
              <li class="breadcrumb-item text-muted active" id="alertText" aria-current="page"></li>
            </ol>
          </nav>
        </header>


        <!-- Primary -->
        <div class="section rounded mb-3">

          <div class="d-flex align-items-center justify-content-between border-bottom pb-4 my-2">

            <div class="w-100">
              <h2 class="h5 mb-0">Monthly Processing Activity</h2>
              <small class="small text-muted">Files uploaded and processed by operators</small>
            </div>

            <!-- save image -->
            <a href="#" data-chartjs-id="visitsvsorders" data-file-name="visitsvsorders"
              class="chartjs-save btn btn-sm btn-light text-primary-hover rounded-circle float-end m-0"
              data-bs-toggle="tooltip" title="Save Chart" aria-label="Save Chart">
              <i class="fi fi-arrow-download m-0"></i>
            </a>

          </div>

          <div class="row g-4">

            <div class="col-12 col-lg-7 col-xl-9 order-1 order-xl-2">

              <div class="position-relative h-100" style="min-height:250px; max-height:500px">
                <canvas id="visitsvsorders" class="chartjs" data-chartjs-dots="false" data-chartjs-legend="false"
                  data-chartjs-grid="true" data-chartjs-tooltip="true" data-chartjs-title="" data-chartjs-xaxes-label=""
                  data-chartjs-yaxes-label="" data-chartjs-line-width="5" data-chartjs-type="polarArea"
                  data-chartjs-labels='["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]'
                  data-chartjs-datasets='[{
  "label": "Processed Files",
  "data": [24, 32, 45, 38, 52, 60, 55, 62, 40, 50, 33, 28],
  "fill": true,
  "backgroundColor": "rgba(87, 79, 236, 0.4)"
}, {
  "label": "Failed Jobs",
  "data": [1, 3, 2, 4, 5, 2, 1, 3, 2, 1, 0, 2],
  "fill": false,
  "borderColor": "#ff4d4f"
}]'></canvas>

              </div>

            </div>

            <div class="col-12 col-lg-5 col-xl-3 order-2 order-xl-1">

              <!-- reveal on hover container -->
              <div class="position-relative animate-reveal-up-item">

                <!-- card rating -->
                <div
                  class="position-relative reveal-item bg-white shadow-lg-hover rounded-xl p-5 p-md-3 py-xl-5 p-4-xs z-index-2">

                  <h6 class="text-muted text-center">SUCCESS RATE</h6>

                  <div class="text-center mt-5">

                    <!-- chart -->
                    <div class="h--120 easypie d-inline-block position-relative z-index-1" data-bar-color="#574fec"
                      data-track-color="#eaeaea" data-scale-color="#cccccc" data-scale-length="0" data-line-width="10"
                      data-line-cap="round" data-size="120" data-percent="61">

                      <div class="absolute-full d-middle pt-0 pb-2">
                        <div class="flex-none text-center">
                          <span class="d-block">94%</span>
                          <small class="d-block text-muted">Processed</small>
                        </div>
                      </div>
                    </div>
                    <!-- /chart -->


                    <p class="text-muted mt-4 mb-2">Files this month</p>
                    <p class="lead fw-medium mb-0 text-primary">
                      <span data-toggle="count" data-count-to="144" data-count-duration="2500">0</span> files
                    </p>

                    <!-- 2 cols -->
                    <div class="d-flex mt-4 fs--15">
                      <p class="text-gray-500 m-0">Uploads</p>
                      <p class="text-gray-600 m-0 fw-medium">621 files</p>

                      <p class="text-gray-500 m-0">Operators</p>
                      <p class="text-gray-600 m-0 fw-medium">12 users</p>
                    </div>



                  </div>

                </div>
                <!-- /card rating -->

                <!-- link under -->
                <div class="fs--16 position-absolute left-0 right-0 bottom-0 z-index-1 pt-3 px-2">

                  <div class="clearfix bg-light p-1 row-pill">
                    <a href="#!" class="btn btn-pill btn-sm btn-success py-1 mb-0 float-start transition-hover-end"
                      title="Detailed Logs" aria-label="Detailed Logs">View Logs</a>
                    <span class="d-block pt-1 pl-2 pr-2 text-muted text-truncate">
                      activity & errors
                    </span>
                  </div>

                </div>

              </div>
              <!-- /reveal on hover container -->

            </div>

          </div>

        </div>
        <!-- /Primary -->







        <!-- imports -->
        <div class="col-12 col-xl-12">

          <div class="portlet">

            <div class="portlet-header">

              <div class="float-end dropdown">

                <a href="processed-files.html" class="btn btn-sm btn-light px-2 py-1 mt-n1">
                  <small>View All</small>
                </a>

              </div>

              <span class="d-block text-muted text-truncate fw-medium">
                Upload Files
              </span>

            </div>

            <div class="p-3">
              <h5 class="fw-bold">Upload Files</h5>
              <input type="file" name="file" id="fileInput" class="form-control mb-3" accept=".xls,.xlsx">
              <button id="uploadBtn" class="btn btn-primary btn-sm">Upload</button>

              <div class="progress mt-3" style="height: 20px; display: none;">
                <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                  style="width: 0%">0%</div>
              </div>

              <div id="processing-spinner" class="mt-2 text-muted small" style="display:none;">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Processing your file, please wait...
              </div>

              <div id="upload-status" class="mt-2 text-muted small"></div>
            </div>


            <!-- content loaded via ajax! -->
            <div class="portlet-body max-h-500 scrollable-vertical scrollable-styled-dark">
              <div id="processing-log-list"></div>

            </div>

            <div class="d-flex align-self-baseline w-100 py-2">
              <a href="processed-files.html" class="btn btn-sm link-muted border-0 shadow-none">
                <i class="fi fi-arrow-end"></i>
                <span>View All</span>
              </a>
            </div>

          </div>

        </div>
        <!-- /imports -->




    </div>
    <!-- /widgets -->


    </main>
    <!-- /main -->

  </div>
  <!-- /content -->


  <!-- footer -->
  <footer id="footer">
    <div class="p-3 bg-white shadow-sm rounded">

      <span class="small fw-medium">&copy; AURA</span>

      <div class="d-inline-block float-end dropdown">
        <ul class="list-inline m-0">

          <!-- LANGUAGE -->
          <li class="dropdown list-inline-item m-0">

            <a id="topDDLanguage" href="#" class="d-inline-block" data-bs-toggle="dropdown" aria-expanded="false"
              aria-haspopup="true">
              <i class="flag flag-us"></i>
              <span class="small px-2">English</span>
            </a>


          </li>
          <!-- /LANGUAGE -->

        </ul>
      </div>

    </div>
  </footer>
  <!-- /footer -->


  </div><!-- /#wrapper -->




  <!-- Core javascripts -->
  <script src="assets/js/core.min.js"></script>
  <script src="assets/js/vendor_bundle.min.js"></script>

  <script src="js/upload_excel.js"></script>


  <!-- Tu configuración personalizada -->
  <!-- <script src="js/FirebaseAuth.js"></script> -->
  <script type="module">
    import "./js/firebase-config.js";
    import "./js/auth.js";
    import "./js/menu.js";
    import "./js/user_data.js";
    import "./js/account.js";
    import "./js/alerts.js";
    import "./js/processing-log-list.js";
  </script>

  <!-- Aquí ya puedes usar firebase.auth() -->
  <script type="module">
    import { auth } from "./js/firebase-config.js";
    import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = "index.html";
      } else {
        document.getElementById("user-email").textContent = user.email;
        document.getElementById("user-name").textContent = user.displayName || "Usuario";
      }
    });

    document.getElementById("logout-btn").addEventListener("click", async (e) => {
      e.preventDefault();
      await signOut(auth);
      window.location.href = "index.html";
    });
  </script>


  <div id="screen-lock" style="
  display: none; 
  position: fixed; 
  z-index: 9999; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%;
  background-color: rgba(255, 255, 255, 0.7); 
  backdrop-filter: blur(4px);
  justify-content: center; 
  align-items: center;">
    <div class="text-center">
      <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;"></div>
      <div class="mt-3 fw-bold">Please wait... Processing your file</div>
    </div>
  </div>


</body>

</html>